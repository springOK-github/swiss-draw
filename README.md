# ポケモンカード・ガンスリンガーバトル マッチングシステム

Google Apps Script (GAS) とスプレッドシートで動作するポケモンカードバトル大会のマッチングシステムです。

## 機能一覧

- プレイヤー登録・管理
- 自動マッチング（再戦回避機能付き）
- 対戦結果記録
- プレイヤードロップアウト処理

## プレイヤーの状態遷移

1. 待機: マッチング待ち
2. 対戦中: 対戦進行中
3. 終了: ドロップアウト済み

## ファイル構成

- `constants.js`: システム全体で使用する定数の定義
- `setup.js`: スプレッドシートの初期設定とメニュー関連
- `core.js`: マッチングと対戦結果記録のメインロジック
- `sheet-utils.js`: スプレッドシート操作のユーティリティ
- `player-utils.js`: プレイヤー管理と状態更新
- `test-utils.js`: テスト用のユーティリティ関数

## セットアップ方法

1. Google スプレッドシートを新規作成
2. ツール → スクリプトエディタを開く
3. 上記の各ファイルをスクリプトエディタにコピー
4. スプレッドシートを更新すると、カスタムメニューが表示される

## 使用方法

1. スプレッドシートのカスタムメニューから「初期設定」を実行
2. プレイヤーシートにプレイヤー情報を登録
3. カスタムメニューから「マッチング実行」を選択
4. 対戦結果を記録
5. 必要に応じてプレイヤーのドロップアウト処理を実行

## 開発者向け情報

### Claspによるローカル開発環境のセットアップ

1. Node.jsをインストール（[公式サイト](https://nodejs.org/)）

2. Claspをグローバルにインストール
```bash
npm install -g @google/clasp
```

3. Googleアカウントにログイン
```bash
clasp login
```

4. プロジェクトのクローン
```bash
# スクリプトIDを指定してクローン
clasp clone "スクリプトID"
```

5. ローカルでの開発
```bash
# ファイルの変更を監視して自動アップロード
clasp push --watch

# 手動でアップロード
clasp push

# 現在のバージョンをデプロイ
clasp deploy
```

### GitHubとの連携

1. リポジトリの作成とクローン
```bash
# GitHubでリポジトリを作成後、ローカルにクローン
git clone https://github.com/ユーザー名/gunslinger.git
cd gunslinger
```

2. Claspプロジェクトとの連携
```bash
# Claspプロジェクトをクローン（既存の場合は省略）
clasp clone "スクリプトID"

# .gitignoreファイルを作成
echo ".clasp.json" >> .gitignore
```

3. 開発ワークフロー
```bash
# GASの変更をプッシュ
clasp push

# GitHubへの変更をプッシュ
git add .
git commit -m "変更内容の説明"
git push origin main

# 他の開発者の変更を取得
git pull origin main
```

4. 推奨事項
- コミットメッセージは日本語で具体的に記述
- `clasp push`と`git push`を併用して、GASとGitHubの両方で最新状態を維持
- 大きな機能追加時はブランチを作成して作業
```

### テスト用関数

テストデータの作成やシステムの動作確認のために、以下の関数が利用可能です：

- `registerTestPlayers()`: テスト用プレイヤーの一括登録
- その他のテスト用関数は `test-utils.js` を参照

## 作者

SpringOK

## ライセンス

このプロジェクトは非公開です。無断での使用、配布、複製は禁止されています。